<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./OTA/css/index.css">
    <!-- <link rel="icon" href="masterMinds_OTA/img/icologo.ico"> -->
    <title>Registration</title>
    

</head>

<body>
       <!-- Registration  -->
    <div class="outterContainer " id="Container">
        <header class="f-w">
            <div class="headd">
                <div class="hd">
                    <nav class="t-nav bg f-w">
                        <!-- <img src="masterMinds_OTA/img/logo.png" alt="logo" class="logo" style="top:-10px"/> -->
                        <div id="link" class="link">
                            <a href="OTA/html/about.html">About Us</a>
                            <a href="#" style="display: none;">Logout</a>     <!---  no logout in reg. page-->
                        </div>
                    </nav>
                </div>
            </div>
        </header>

        <div id="error"></div>
        <form id="regForm" method="post">
            <div class="innerContainer">
                <h2>Registration</h2>
                <hr><br>
                <div class="input-set">
                    <!--   first name -->
                    <!-- <label for="fname">First Name</label> -->
                    <div id="input-info">
                    <!-- <span><i class="fa fa-user" aria-hidden="true" style="top:35.5%;"></i></span><br><br> -->
                    <input type="text" class="fname" id="fname" name="fname" placeholder="First Name" required></i><br>
                    <small id="ufname"></small>
                    </div>
                    <!--   last name -->
                    <!-- <label for="lname">Last Name</label> -->
                    <div id="input-info">
                    <!-- <span><i class="fa fa-user" aria-hidden="true" style="top:49%;"></i></span><br><br> -->
                    <input class="lname" type="text" id="lname" name="lname" placeholder="Last Name" required><br>
                    <small id="ulname"></small>
                </div>

                    <!-- email-->
                    <!-- <label for="email">E-mail</label> -->
                    <div id="input-info">
                    <!-- <span><i class="fa fa-envelope" aria-hidden="true" style="top:62.4%;"></i></span><br><br> -->
                    <input class="email" type="text" id="email" name="email" placeholder="E-mail" required>
                    <small id="umail"></small>
                    <br>
                </div>

                    <!--Password -->
                    <!-- <label for="Password">Password</label> -->
                    <div id="input-info">
                    <!-- <span><i class="fa fa-unlock" aria-hidden="true" style="top:79%;"></i></span><br><br> -->
                    <input class="pass" id="pass" type="password" name="password" placeholder="Password" required><br>
                    <small id="ups1"></small>
                </div>
                    <!--   confirm Password-->
                    <!-- <label for="confirm"> Confirm Password</label> -->
                    <div id="input-info">
                    <!-- <span><i class="fa fa-unlock" aria-hidden="true" style="top:93%;"></i></span><br><br> -->
                    <input class="conpass" type="password" id="conpass" name="conpass" placeholder="Confirm Password" required><br>
                    <small  id="ups2"></small>
                    </div>
                    <select name="posision" id="posision" class="front" required>
                        <option value="" disabled selected>Select your Language</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="js"> Javascript </option>
    
                    </select><br><br>

                    
                        <span> Already Registered !! <a href="./OTA/html/login.html">Login</a></span>
                    
                    <!--      button registr--> <!--onclick="startReg()" onclick="addData()"--->
                    <button id="reg-btn" class="reg-btn" type="submit" value="Submit" > Register now </button>
                </div>
                <!--   End Conrainer  -->
            </div>
            <!-- End Form -->
        </form>  </div>
        <footer>
            <div id="footer" class="footer">
               <P id="pf" class="pf">  All Copyright @ Reserved   </P>
               <P id="ota" class="otar">  Desgined by OTA, 2022 </P>

            </div>
        </footer>
  
</body>
<script>


const regisform = document.getElementById("regForm");
let fname = document.getElementById("fname"); 
let lname = document.getElementById("lname"); 
let email = document.getElementById("email"); 
let pass   = document.getElementById("pass"); 
let conpass = document.getElementById("conpass");
let fnameMsg=document.getElementById("ufname");
let lnameMsg=document.getElementById("ulname");
let mailMsg=document.getElementById("umail");
let psMsg=document.getElementById("ups1");
let ps2Msg=document.getElementById("ups2");
let posision  = document.getElementById("posision");

let info=[];

function LocalStorageFrom(){
    let ureg=JSON.stringify(info);
    localStorage.setItem('Data',ureg); 
    console.log(ureg);
}
// /*************************************************************** */
function User(fname, lname,email, password, spassword, posision){
    this.fname=fname;
    this.lname=lname;
    this.email=email;
    this.password=password;
    this.spassword=spassword;
    this.posision=posision;
    this.ufname=ufname(fname);
    this.ulname=ulname(lname);
    this.mail=mail(email);
    this.checkPassword=checkPassword(password,spassword);
   

    // console.log(fname, lname,email, pass, conpass);
    // startReg()
    info.push(fname, lname,email, password, spassword, posision)
    LocalStorageFrom();
    // console.log(userreg);
    
    }
    /************************************************/
// var regName = /^[A-Za-z]+$/; 
// function ufname(fname){
// let out;
//        // for user name
// if(regName.test(fname)){
//     console.log('correct fnam');
//     out=fname;
//     return out;
//    }
// else {
//     fnameMsg.textContent="Invalid First name given, required only characters";
// }}

var regName = /^[A-Za-z]+$/; 

function ufname(fname){
    let out;
    // var regName = /^[A-Za-z]+$/;        // for user name
    if(regName.test(fname)){
        console.log('correct fisrt');
        out=fname;
        return out;
       }
    else {
        fnameMsg.textContent=" required only characters";
    }}

/****************************/ 
function ulname(lname){
    let out1;
    // var regName = /^[A-Za-z]+$/;        // for user name
    if(regName.test(lname)){
        console.log('correct last');
        out1=lname;
        return out1;
       }
    else {
        lnameMsg.textContent=" required only characters";
    }}
/**********************/ 
function mail(email){
    let out3;
 var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/; // for email
    if(filter.test(email)){
        console.log('correct @');
        out3=email;
        return out3;
       }
    else {
        mailMsg.textContent="Invalid email given, missing @";
    }}
/*************************** */

/*To check from password */
function checkPassword(password,spassword){
    let regex=/^(?=.*[a-z])(?=.*[A-Z])(?=(.*[\d]){2,})[A-Za-z\d?]{8,32}$/;
    let num=/[\d]{2,}/;
    let capital=/[A-Z]/;
    let symboles=/[#$@!%&*?]/;
    if ((regex.test(password))){ //To check from 2 passwords syntax
        console.log('password syntax is Incorrect');
        psMsg.textContent= 'password syntax is Incorrect';
    }
    else if((!capital.test(password[0]))){ //To check from the first letter
        console.log("Incorrect! password must be capital");
        psMsg.textContent= 'Incorrect! password must be capital.';
    }
    else if((!num.test(password))){
        console.log('You password must contain 2 numbers at least');
         psMsg.textContent= 'You password must contain 2 numbers at least';
    }
    else if((!symboles.test(password))){
        console.log('You password must contain  at least 1 symbole');
         psMsg.textContent= 'You password must contain  at least 1 symbole';
    }else if (!(password.length>=8 && password.length<=20)){
        psMsg.textContent= 'You password must at min 8 and max 20';
    }
    else if ((password===spassword)){
        console.log('Your registration is Complete ');  
        ps2Msg.textContent= `Your registration is Complete`;
    }else{
        ps2Msg.textContent= `Passwords don't match`;
    }
}
/********************************** */
regisform.addEventListener("submit", checking);
function checking(event) {
event.preventDefault();

let fname = event.target.fname.value;
let lname = event.target.lname.value;
let email = event.target.email.value;
let password = event.target.pass.value;
let spassword = event.target.conpass.value;
let posision = event.target.posision.value;

console.log(fname);
console.log(lname);
console.log(email);
console.log(password);
console.log(spassword);
console.log(posision);

// Redirecting to login page.
new User(fname, lname,email, password, spassword,posision);



}  

// checking();

// window.location.href = ".//OTA/html/login.html";
// trans();

// function trans(){
    checking();
    location.replace("../html/login.html");
//  }
//  trans();

    </script>
</html>